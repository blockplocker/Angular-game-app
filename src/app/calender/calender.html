<div class="container">

    <div class="sidebar">
        <div class="sidebar-section">
            <h2>Instructions</h2>
            <ul>
                <li>Select dates and you will be prompted to create a new event</li>
                <li>Click existing events to delete them</li>
                <li>Drag, drop, and resize events</li>
            </ul>
            <p>Events are saved to a backend server. If the server is unreachable, you can switch to using local
                storage.</p>
            <p>Using <span>{{ storage }}</span></p>
            <button (click)="toggleLocalStorage()">Toggle Local Storage</button>
        </div>
    </div>

    <app-modal-wrapper [isOpen]="createModalOpen" [title]="title" (cancel)="closeModal()">
        <label for="createEventTitle">Event Title:</label>
        <input id="createEventTitle" [(ngModel)]="inputTitle" maxlength="20" placeholder="Enter event title" />
        <button (click)="onCreate(inputTitle)"
            [disabled]="!inputTitle || inputTitle.trim() === '' || inputTitle.length > 20">Create</button>
        <button class="cancel" (click)="closeModal()">Cancel</button>
    </app-modal-wrapper>

    <app-modal-wrapper [isOpen]="updateModalOpen" [title]="title" (cancel)="closeModal()">
        <p>Date: {{ eventDate }}</p>
        <label for="updateEventTitle">Event Title:</label>
        <input id="updateEventTitle" [(ngModel)]="inputTitle" maxlength="20" placeholder="Update event title" />
        <button (click)="onUpdate(inputTitle)"
            [disabled]="!inputTitle || inputTitle.trim() === '' || inputTitle.length > 20">Update</button>
        <button (click)="onDelete()">Delete</button>
        <button class="cancel" (click)="closeModal()">Cancel</button>
    </app-modal-wrapper>

    <app-modal-wrapper [isOpen]="localStorageErrorModalOpen" [title]="title" (cancel)="closeModal()">
        <button (click)="toggleLocalStorage()">Use Local Storage</button>
        <button class="cancel" (click)="closeModal()">Cancel</button>
    </app-modal-wrapper>

    <app-modal-wrapper [isOpen]="errorModalOpen" [title]="title" (cancel)="closeModal()">
        <button class="cancel" (click)="closeModal()">OK</button>
    </app-modal-wrapper>


    <div class="main">
        <full-calendar [options]="calendarOptions">
            <ng-template #eventContent let-arg>
                <b>{{ arg.timeText }}</b>
                <i>{{ arg.event.title }}</i>
            </ng-template>
        </full-calendar>
    </div>
</div>